{% extends 'base.html' %}
{% block content %}

    <h1>{{ competition.name }}</h1>

    <div class="form-group mt-5 mb-5">
        <select class="form-control" style="width: 140px" id="seasonsMenu" aria-label="Default select example"
                onchange="showSeasonContent()">
            {% for season in seasons %}
                <option value="{{ season.id }}">{{ season.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div id="seasonContent"></div>

    <script>
        function showSeasonContent() {
            var selectedSeasonId = document.getElementById("seasonsMenu").value;
            var seasonContent = document.getElementById("seasonContent");

            // Perform an AJAX request to get the teams for the selected season
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    seasonContent.innerHTML = this.responseText;
                }
            };
            var competitionId = {{ competition.id }};
            var url = "/competitions/" + competitionId + "/seasons/" + selectedSeasonId + "/";
            xhttp.open("GET", url, true);
            xhttp.send();
        }

        // Show the content of the first option when the page loads
        window.onload = function () {
            showSeasonContent();
        };
    </script>

{% endblock %}
